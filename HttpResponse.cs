// Decompiled with JetBrains decompiler
// Type: HttpResponse
// Assembly: SQLi Dumper, Version=8.5.0.0, Culture=neutral, PublicKeyToken=null
// MVID: FFDD07D3-5737-4188-BACA-DE2D004C7CCF
// Assembly location: C:\Users\cole\Desktop\SQLi Dumper v8.5 [VeryClean]\SQLi v.8.5 VeryClean by Stephanny.exe

using Microsoft.VisualBasic.CompilerServices;
using System;
using System.Collections;
using System.Net;
using System.Text;

public class HttpResponse
{
  private string _sourceCode;
  private TimeSpan _responseTime;
  private HttpStatusCode _statusCode;
  private Uri _responseUri;
  private CookieCollection _Cookies;
  private HttpWebResponse _HTTPResponse;
  private HttpWebRequest _HTTPRequest;
  private string _PostData;

  public string SourceCode => this._sourceCode;

  public TimeSpan ResponseTime => this._responseTime;

  public HttpStatusCode StatusCode => this._statusCode;

  public Uri ResponseUri => this._responseUri;

  public CookieCollection Cookies => this._Cookies;

  public WebHeaderCollection Headers => this.HTTPRequest.Headers;

  public HttpWebResponse HTTPResponse
  {
    get => this._HTTPResponse;
    set => this._HTTPResponse = value;
  }

  public HttpWebRequest HTTPRequest
  {
    get => this._HTTPRequest;
    set => this._HTTPRequest = value;
  }

  public string PostData
  {
    get => this._PostData;
    set => this._PostData = value;
  }

  public HttpResponse(
    Uri responseUri,
    HttpStatusCode statusCode,
    string sourceCode,
    CookieCollection cookies,
    TimeSpan responseTime,
    HttpWebRequest HTTPRequest,
    HttpWebResponse HTTPResponse)
  {
    this._sourceCode = string.Empty;
    this._sourceCode = sourceCode;
    this._statusCode = statusCode;
    this._responseUri = responseUri;
    this._responseTime = responseTime;
    this._Cookies = cookies;
    this._HTTPRequest = HTTPRequest;
    this._HTTPResponse = HTTPResponse;
  }

  public string RawRequest()
  {
    StringBuilder stringBuilder1 = new StringBuilder(1000);
    StringBuilder stringBuilder2 = stringBuilder1;
    stringBuilder2.Append(this.HTTPRequest.Method);
    stringBuilder2.Append(" ");
    stringBuilder2.Append(Globals.G_Utilities.DecodeURL(this.HTTPRequest.RequestUri.PathAndQuery));
    stringBuilder2.Append(" ");
    stringBuilder2.Append("HTTP/");
    stringBuilder2.Append((object) this.HTTPRequest.ProtocolVersion);
    stringBuilder2.AppendLine();
    try
    {
      foreach (object header in this.HTTPRequest.Headers)
      {
        string name = Conversions.ToString(header);
        stringBuilder2.Append(name);
        stringBuilder2.Append(":");
        stringBuilder2.AppendLine(this.HTTPRequest.Headers.Get(name));
      }
    }
    finally
    {
      IEnumerator enumerator;
      if (enumerator is IDisposable)
        (enumerator as IDisposable).Dispose();
    }
    if (Operators.CompareString(this.HTTPRequest.Method, "POST", false) == 0)
    {
      stringBuilder2.AppendLine();
      stringBuilder2.AppendLine(Globals.G_Utilities.DecodeURL(this.PostData));
      stringBuilder2.AppendLine();
    }
    return stringBuilder1.ToString();
  }

  public string HeadersAsString()
  {
    WebHeaderCollection headers = this.Headers;
    if (headers == null)
      return string.Empty;
    StringBuilder stringBuilder1 = new StringBuilder(1000);
    StringBuilder stringBuilder2 = stringBuilder1;
    int num1 = checked (headers.Count - 1);
    int index1 = 0;
    while (index1 <= num1)
    {
      string key = headers.GetKey(index1);
      string[] values = headers.GetValues(key);
      stringBuilder2.AppendLine(key);
      if (values.Length > 0)
      {
        int num2 = checked (values.Length - 1);
        int index2 = 0;
        while (index2 <= num2)
        {
          stringBuilder2.AppendLine("  " + values[index2]);
          checked { ++index2; }
        }
      }
      checked { ++index1; }
    }
    return stringBuilder1.ToString();
  }

  public string CookiesAsString()
  {
label_0:
    int num1;
    string empty;
    int num2;
    try
    {
      int num3 = 1;
      StringBuilder stringBuilder1;
      if (this._Cookies != null)
      {
label_1:
        num3 = 2;
        stringBuilder1 = new StringBuilder(1000);
      }
      else
        goto label_26;
label_2:
      num3 = 3;
      IEnumerator enumerator = this._Cookies.GetEnumerator();
      goto label_22;
label_4:
      ProjectData.ClearProjectError();
      num1 = 1;
label_5:
      num3 = 5;
      StringBuilder stringBuilder2 = stringBuilder1;
label_6:
      num3 = 6;
      Cookie current;
      stringBuilder2.AppendLine("Name: " + current.Name);
label_7:
      num3 = 7;
      stringBuilder2.AppendLine("Value: " + current.Value);
label_8:
      num3 = 8;
      stringBuilder2.AppendLine("Domain: " + current.Domain);
label_9:
      num3 = 9;
      stringBuilder2.AppendLine("Path: " + current.Path.ToString());
label_10:
      num3 = 10;
      stringBuilder2.AppendLine("Expires: " + current.Expires.ToString());
label_11:
      num3 = 11;
      stringBuilder2.AppendLine("Expired: " + current.Expired.ToString());
label_12:
      num3 = 12;
      stringBuilder2.AppendLine("TimeStamp: " + current.TimeStamp.ToString());
label_13:
      num3 = 13;
      stringBuilder2.AppendLine("Port: " + current.Port.ToString());
label_14:
      num3 = 14;
      stringBuilder2.AppendLine("Secure: " + current.Secure.ToString());
label_15:
      num3 = 15;
      stringBuilder2.AppendLine("HttpOnly: " + current.HttpOnly.ToString());
label_16:
      num3 = 16;
      stringBuilder2.AppendLine("Discard: " + current.Discard.ToString());
label_17:
      num3 = 17;
      stringBuilder2.AppendLine("Comment: " + current.Comment);
label_18:
      num3 = 18;
      stringBuilder2.AppendLine("CommentUri: " + current.CommentUri.ToString());
label_19:
      num3 = 19;
      stringBuilder2.AppendLine("Version: " + current.Version.ToString());
label_20:
      stringBuilder2 = (StringBuilder) null;
label_21:
      num3 = 21;
label_22:
      if (enumerator.MoveNext())
      {
        current = (Cookie) enumerator.Current;
        goto label_4;
      }
      else if (enumerator is IDisposable)
        (enumerator as IDisposable).Dispose();
label_25:
      num3 = 22;
      empty = stringBuilder1.ToString();
      goto label_33;
label_26:
      num3 = 24;
      empty = string.Empty;
      goto label_33;
label_28:
      num2 = num3;
      switch (num1)
      {
        case 1:
          int num4 = num2 + 1;
          num2 = 0;
          switch (num4)
          {
            case 1:
              goto label_0;
            case 2:
              goto label_1;
            case 3:
              goto label_2;
            case 4:
              goto label_4;
            case 5:
              goto label_5;
            case 6:
              goto label_6;
            case 7:
              goto label_7;
            case 8:
              goto label_8;
            case 9:
              goto label_9;
            case 10:
              goto label_10;
            case 11:
              goto label_11;
            case 12:
              goto label_12;
            case 13:
              goto label_13;
            case 14:
              goto label_14;
            case 15:
              goto label_15;
            case 16:
              goto label_16;
            case 17:
              goto label_17;
            case 18:
              goto label_18;
            case 19:
              goto label_19;
            case 20:
              goto label_20;
            case 21:
              goto label_21;
            case 22:
              goto label_25;
            case 23:
            case 24:
              goto label_26;
            case 25:
              goto label_33;
          }
          break;
      }
    }
    catch (Exception ex) when (ex is Exception & (uint) num1 > 0U & num2 == 0)
    {
      ProjectData.SetProjectError(ex);
      goto label_28;
    }
    throw ProjectData.CreateProjectError(-2146828237);
label_33:
    string str = empty;
    if (num2 == 0)
      return str;
    ProjectData.ClearProjectError();
    return str;
  }
}
