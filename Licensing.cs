// Decompiled with JetBrains decompiler
// Type: Licensing
// Assembly: SQLi Dumper, Version=8.5.0.0, Culture=neutral, PublicKeyToken=null
// MVID: FFDD07D3-5737-4188-BACA-DE2D004C7CCF
// Assembly location: C:\Users\cole\Desktop\SQLi Dumper v8.5 [VeryClean]\SQLi v.8.5 VeryClean by Stephanny.exe

using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using System;
using System.Management;
using System.Text;

public class Licensing
{
  private static string[] KEY = new string[4];
  private const string SSID = "SQLi_Dumper_7";

  private static string Generate(string sID)
  {
    string str = sID + "SQLi_Dumper_7";
    int num1 = Strings.Len(str);
    int Length = 1;
    int num2;
    while (Length <= num1)
    {
      num2 = checked ((int) Math.Round(Conversion.Val((object) unchecked ((double) num2 + Conversion.Val((object) Strings.Asc(Strings.Right(str, Length)))))));
      checked { ++Length; }
    }
    Licensing.KEY[0] = Strings.Right(Conversion.Hex(checked (1340 * num2)), 5);
    Licensing.KEY[1] = Strings.Left(Conversion.Hex(checked (2103 * num2)), 5);
    Licensing.KEY[2] = Strings.Right(Conversion.Hex(checked (3043 * num2)), 5);
    Licensing.KEY[3] = Strings.Left(Conversion.Hex(checked (4234 * num2)), 5);
    return string.Format("{0} - {1} - {2} - {3}", (object) Licensing.KEY[0], (object) Licensing.KEY[1], (object) Licensing.KEY[2], (object) Licensing.KEY[3]);
  }

  public static string GeneratePRO(string sID) => Licensing.Generate(sID);

  public static string GenerateME() => Licensing.Generate(Licensing.GetID());

  public static bool Check(string sKeys)
  {
    try
    {
      string[] strArray = sKeys.Split('-');
      Licensing.Generate(Licensing.GetID());
      int num = checked (strArray.Length - 1);
      int index = 0;
      while (index <= num && strArray[index].Trim().Equals(Licensing.KEY[index]))
        checked { ++index; }
      return true;
    }
    catch (Exception ex)
    {
      ProjectData.SetProjectError(ex);
      ProjectData.ClearProjectError();
    }
    return true;
  }

  public static string GetID()
  {
    string Left = "";
    StringBuilder stringBuilder = new StringBuilder();
    ManagementObjectCollection instances = new ManagementClass("win32_processor").GetInstances();
    try
    {
      foreach (ManagementObject managementObject in instances)
      {
        if (Operators.CompareString(Left, "", false) == 0)
        {
          Left = managementObject.Properties["processorID"].Value.ToString();
          break;
        }
      }
    }
    finally
    {
      ManagementObjectCollection.ManagementObjectEnumerator objectEnumerator;
      objectEnumerator?.Dispose();
    }
    char[] chArray = !string.IsNullOrEmpty(Left) ? Left.ToCharArray() : throw new Exception("Cant load hardware id");
    int index = 0;
    while (index < chArray.Length)
    {
      char String = chArray[index];
      stringBuilder.Append(Strings.Asc(String));
      checked { ++index; }
    }
    return stringBuilder.ToString();
  }
}
